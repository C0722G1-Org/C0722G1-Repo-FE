<div class="row mt-5">
  <div class="col-8">

    <table class="table table-light table-striped table-hover mt-3">
      <thead>
      <tr>
        <th colspan="11">
          <div class="row">
            <div class="col-3">
              <h2 class="text-primary">Bài đăng</h2>
            </div>
            <div class="col-6">
              <form class="d-flex justify-content-center">

                <label class="me-2">
                  <select #monthVariable style="width: 100%"
                          class="form-select">
                    <option value="-1">Tháng</option>
                    <option *ngFor="let month of monthList" [ngValue]="month">{{month}}</option>
                  </select>
                </label>
                <label class="me-2">
                  <select #yearVariable style="width: 100%" class="form-select me-1">
                    <option value="-1" selected>Năm</option>
                    <option *ngFor="let year of yearList" [ngValue]="year">{{year}}</option>
                  </select>
                </label>
                <button class="btn btn-primary me-1" (click)="searchChart(monthVariable.value,yearVariable.value)"
                        type="button"><i class="bi bi-search"></i></button>
              </form>
              <small>Chọn năm hoặc chọn cả năm và tháng để tìm kiếm kết quả!!!</small>
            </div>
          </div>
        </th>
      </tr>

      <tr>
        <th hidden>ID</th>
        <th>Ngày</th>
        <th>Vị trí</th>
        <th>Giá Cả</th>
        <th>Tình trạng</th>
        <th>Lợi nhuận</th>
      </tr>
      </thead>
      <tbody>
      <tr *ngFor="let post of postCharList ;index as i ">
        <td hidden>{{post.idPost}}</td>
        <td>{{post.dateCreation | date:'dd/MM/yyyy'}}</td>
        <td>{{post.numberAddress + ',' + post.nameWards + ',' + post.nameDistrict + ',' + post.nameCity}}</td>
        <td>{{post.price | currency: "VND"}}</td>
        <td *ngIf="post.statusPost!=undefined">{{post.statusPost == 1 ? 'Thành Công' : 'Thất Bại'}}</td>
        <td *ngIf="post.statusPost!= undefined && post.statusPost>1,else block1">{{0|currency: "VND"}}</td>

        <ng-template #block1>
          <td *ngIf="post.price!= undefined && 0 <=post.price && post.price<2000000000 ">
            {{post.price * 0.02 |currency: "VND"}}</td>
          <td
            *ngIf="post.price!= undefined && 2000000000 <=post.price && post.price<3000000000 ">
            {{post.price * 0.03 |currency: "VND"}}</td>
          <td *ngIf="post.price != undefined && 3000000000<=post.price">
            {{post.price * 0.05 |currency: "VND"}}</td>
        </ng-template>
      <tr>
      <tr>
<!--        <td colspan="9" *ngIf="postCharList==null">Không tìm thấy kết quả!!!</td>-->
      </tr>
      </tbody>
    </table>

  </div>

  <!--CHART.JS-->
  <div class="col-4 text-primary">
    <h5>Số bài đăng thành công: {{countSuccess}}/{{countTotal}}</h5>
    <h5>Tổng giao dịch: {{totalTransaction |currency: "VND"}} </h5>
    <div class="row">
      <div class="col-6"><h5>Biểu đồ bài đăng năm:</h5></div>
      <div class="col-6">
        <label>
          <select #yearChange (change)="changeYear(yearChange.value)" style="width: 100%"
                  class="form-select me-1">
            <option *ngFor="let year of yearList" [selected]="currentYear" [ngValue]="year">{{year}}</option>
          </select>
        </label>
      </div>
    </div>

    <div style="width:100%;">
      <canvas id="myChart" width="100%" height="75"></canvas>
    </div>
  </div>
</div>
<router-outlet></router-outlet>

